---
aliases:
  - Хранение конфигурационных файлов (RCS & Git)
tags: old.puzan.dev
title: Хранение конфигурационных файлов (RCS & Git)
created: 2013-06-11
modified: 2025-08-10T11:59:29+03:00
permalink: linux/2013-06-11-khranenie-konfiguratsionnykh-failov-rcs-git
---

Когда-то давным давно, я впервые познакомился с системами контроля версий. Наверное это была _CVS_. _Git_'а тогда еще в планах думаю не было. Возникла у меня примерно в то далекое время логичная идея хранить все настройки в какой-нибудь подобной системе. Так совпало, что тогда же я активно изучал [[20250810114741 Emacs|Emacs]]. И наткнулся тогда я на _Version Control_ расширение. Именно оттуда я узнал о более древней системе: _RCS_. Как ни странно, именно в эту систему _Emacs_ предлагает добавить файлы по умолчанию (`C-x v v`).

> [!info]
> Заметка из 2013-го года! Ранее была [опубликована в старом блоге](https://old.puzan.dev/linux/2013-06-11-khranenie-konfiguratsionnykh-failov-rcs-git.html). Там же могут быть найдены полезные комменты.

Так вот, с тех давних пор у меня все хранилось в _RCS_. Вообще говоря это достаточно удобно, если единственная задача: хранить историю изменений на одной машине. Все управление через _Emacs_. Я даже не особо знаю ключи команд `ci` и `co`.

Теперь же у меня фактически 4 компьютера, на которых я хотел бы иметь одинаковые, хотя бы, пользовательские настройки. Например, для _bash_ или того же _git_. Для этого я задумал поместить все необходимые файлы из домашней директории в _git_ репозиторий. Но положить в _git_ всю или часть домашней директории похоже нехорошая идея. Однозначно будут глюки с _git prompt_. Если не добавить все файлы в `.gitignore`, то _git prompt_ просто подвесит консоль: сканирование всей домашней директории не быстрое дело. Думаю это не единственная проблема.

Я решил воспользоваться следующей схемой. Нужные файлы скопировать в специальную папочку. В ней организовать _git_ репозиторий. А в домашней директории создать ссылки на файлы из этой папки. Для автоматизации последней задачи я написал небольшой скриптик. Когда доработаю, выложу на [github][github].

Еще одна проблема: специфичные настройки определенных машин. Например, `PATH` в _Linux_ и _OS X_ местами различаются (избыточности не хочется). В `.gitconfig` у меня даже различие есть. Для решения этого вопроса я создал для каждой машины, которой необходимы какие-то особенности, специальную ветку. Общие настройки хранятся на _master_ ветке. Неудобство этой схемы связанно с тем, что надо постоянно сливать изменения с _master_'а в специфичные ветки. Может есть какое-то более простое и элегантное решение?

Ну а системные настройки (`/etc/`) я так и продолжаю хранить в _RCS_. Если будет задача настройки нескольких одинаковых машин, то можно будет подумать на тему синхронизации через _git_. Пока это не нужно. _RCS_ хранит историю и этого достаточно. Насколько знаю _portage_ в _gentoo_ можно настроить для сохранения истории в _RCS_ (см. `/etc/dispatch-conf.conf`). Но сам я этой возможностью не пользуюсь. Что-то там не состыковывается с моими привычками.

[github]: https://github.com/puzan
